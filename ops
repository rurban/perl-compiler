{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426202966,"metadata":{"github-id":"MDU6SXNzdWU2MDkzNTAyMw==","github-url":"https://github.com/rurban/perl-compiler/issues/73","origin":"github"},"title":"Encode::decode fails in multiple ways 1. standalone B::REGEXP refs, 2. reg_temp_copy from invalid r-\u003eoffs, 3. Assertion: (SvTYPE(TARG) == SVt_PVHV)","message":"Original [issue 71](https://code.google.com/p/perl-compiler/issues/detail?id=71) created by rurban on 2011-06-25T13:55:43.000Z:\n\nThis test program segfaults when compiled with B::CC.\n# test22.pl\n\nuse Encode;\nprint join(',',Encode-\u0026gt;encodings()), \u0026quot;\\n\u0026quot;;\nmy $x = 'abc';\nprint(Encode::decode('utf8', $x), \u0026quot;\\n\u0026quot;);\n# print(Encode::decode('UTF-8', $x), \u0026quot;\\n\u0026quot;);\n\nExpected output:\n$ perl test22.pl \nascii,ascii-ctrl,iso-8859-1,null,utf-8-strict,utf8\nabc\nabc\n\nWith B:CC:\n$ perl -I ~/perl-compiler/lib -MO=CC,-Dl,-otest22.c test22.pl\n$ perl -I ~/perl-compiler/lib ~/perl-compiler/script/cc_harness -o test22 test22.c\n$ ./test22\nascii,ascii-ctrl,iso-8859-1,null,utf-8-strict,utf8\nabc\nSegmentation fault\n\nBacktrace from gdb:\n# \u0026nbsp;0  0x0812b4b3 in Perl_reg_temp_copy ()\n# \u0026nbsp;1  0x0817a340 in Perl_pp_regcomp ()\n# \u0026nbsp;2  0x080c4a55 in pp_sub_Encode__Alias__find_alias () at test22.c:30329\n# \u0026nbsp;3  0x0809ed98 in pp_sub_Encode__getEncoding () at test22.c:23628\n# \u0026nbsp;4  0x0809da99 in pp_sub_Encode__find_encoding () at test22.c:23416\n# \u0026nbsp;5  0x0809c4eb in pp_sub_Encode__decode () at test22.c:23180\n# \u0026nbsp;6  0x0809a0e8 in pp_main () at test22.c:22796\n\nUsed versions:\n- perl v5.12.3\n- B::C r1111","files":null}]}