{"version":1,"ops":[{"type":3,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1443786217,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0NDk5NjUzOQ==","github-url":"https://github.com/rurban/perl-compiler/issues/221#issuecomment-144996539"},"message":"perl core doesn't even anonymize the stash. \nHere we had to bump refcnt of CV's to workaround broken sv_free with CVs, that's why it doesn't work this way.\n\nSee old testcase 182\n\nI try to fix it with cperl though, because there I have control over the sv_free with static ptr problems.\nWe will need new fields CvSTATIC, AvSTATIC, HvSTATIC, GvSTATIC.","files":null},{"type":3,"author":{"id":"56586ed5deca9cd92c92f9ff0458b9bd60f911f3"},"timestamp":1444673633,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0NzQ3OTk0MA==","github-url":"https://github.com/rurban/perl-compiler/issues/221#issuecomment-147479940"},"message":"another issue, which seems to show the same problem\n\n```\n\u003e perl -e 'package FOO3; use B (); sub named {}; my $anon = sub {}; my $named = eval q[\\\u0026named]; delete $FOO3::{named}; print \"ok\\n\" if B::svref_2object($named)-\u003eGV-\u003eNAME eq \"__ANON__\";'\nok\n\u003e perlcc -r -e 'package FOO3; use B (); sub named {}; my $anon = sub {}; my $named = eval q[\\\u0026named]; delete $FOO3::{named}; print \"ok\\n\" if B::svref_2object($named)-\u003eGV-\u003eNAME eq \"__ANON__\";'\n```","files":null},{"type":3,"author":{"id":"10c623ced12a685284188dc5ea89cffce509dd3d"},"timestamp":1446076243,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE1MjAzNDMwNA==","github-url":"https://github.com/rurban/perl-compiler/issues/221#issuecomment-152034304"},"message":"utf8 example:\n\n``` perl\npackage main;\npackage ｍａｉｎ;\n\nmy @c;\n\n# Bug 20020517.003, used to dump core\nsub ｆｏｏ { @c = caller(0) }\nmy $fooref = delete $ｍａｉｎ::{ｆｏｏ};\n$fooref-\u003e();\n$c[3] eq \"ｍａｉｎ::__ANON__\" and print \"ok\\n\"\n```","files":null},{"type":5,"author":{"id":"10c623ced12a685284188dc5ea89cffce509dd3d"},"timestamp":1446148566,"metadata":{"github-id":"MDE0OlVubGFiZWxlZEV2ZW50NDQ5NjcyODAx"},"added":[],"removed":["CoreTests.522"]},{"type":5,"author":{"id":"10c623ced12a685284188dc5ea89cffce509dd3d"},"timestamp":1446148602,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ0OTY3MzM1Ng=="},"added":["CoreTests.522"],"removed":[]},{"type":3,"author":{"id":"10c623ced12a685284188dc5ea89cffce509dd3d"},"timestamp":1446150711,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE1MjMwOTcyOA==","github-url":"https://github.com/rurban/perl-compiler/issues/221#issuecomment-152309728"},"message":"./t/testc.sh 182","files":null},{"type":5,"author":{"id":"10c623ced12a685284188dc5ea89cffce509dd3d"},"timestamp":1446160775,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ0OTg1ODc5OQ=="},"added":["Priority-Low"],"removed":[]},{"type":3,"author":{"id":"56586ed5deca9cd92c92f9ff0458b9bd60f911f3"},"timestamp":1537477074,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQyMzMzMDgzNg==","github-url":"https://github.com/rurban/perl-compiler/issues/221#issuecomment-423330836"},"message":"the two previous examples above are currently working with Perl 5.28.0 and bc528 branch from https://github.com/CpanelInc/perl-compiler/tree/bc528","files":null}]}