{"version":1,"ops":[{"type":5,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200052,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1MTM3NTgzMQ=="},"added":["Type-Defect"],"removed":[]},{"type":5,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200052,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1MTM3NTgzMg=="},"added":["OpSys-All"],"removed":[]},{"type":5,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200052,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1MTM3NTgzMw=="},"added":["Priority-High"],"removed":[]},{"type":5,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200052,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1MTM3NTgzNA=="},"added":["Milestone-Release1.0"],"removed":[]},{"type":5,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200052,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1MTM3NTgzNQ=="},"added":["Component-Logic"],"removed":[]},{"type":5,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200052,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1MTM3NTgzNg=="},"added":["Usability"],"removed":[]},{"type":3,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200055,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc4NjY2NTE3","github-url":"https://github.com/rurban/perl-compiler/issues/37#issuecomment-78666517"},"message":"Comment [#1](https://code.google.com/p/perl-compiler/issues/detail?id=35#c1) originally posted by rurban on 2010-08-17T10:25:17.000Z:\n\nThis is a follow up to my previous test case fail2.pl.\n\n# fail3.pl\n\nsub test {\nmy $tmp5 = 1;\nmy $x = 2;\nif ($x != 3) { 4; }\n\n# }\n\nThis fails with:\n$ cc_harness -o fail3 fail3.c\n...\nfail3.c: In function ‘pp_sub_test’:\nfail3.c:437: error: redeclaration of ‘d_tmp5’ with no linkage\nfail3.c:437: note: previous declaration of ‘d_tmp5’ was here\n\nB::CC translates some lexical variables of Perl to lexical variables of C.\nThe name of the variable is reused from Perl.\nBut additional variables are generated which hold temporary values with names like \"tmp$i\".\nThe code in \"sub load_pad\" of B::CC doesn't check for any name clashes.\nHence we get errors with duplicate names like here and in the other test case \"fail2.pl\".\n\nHeinz Knutzen","files":null},{"type":3,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200059,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc4NjY2NTg2","github-url":"https://github.com/rurban/perl-compiler/issues/37#issuecomment-78666586"},"message":"Comment [#2](https://code.google.com/p/perl-compiler/issues/detail?id=35#c2) originally posted by rurban on 2010-08-17T12:44:25.000Z:\n\nSee t/issue35.t with r525.\nHeinz came up with a good patch, which I refactored to\n\n```\nIndex: lib/B/CC.pm\n===================================================================\n--- lib/B/CC.pm (revision 521)\n+++ lib/B/CC.pm (working copy)\n@@ -605,7 +605,7 @@\n     my $namesv = $namelist[$ix];\n     my $type   = T_UNKNOWN;\n     my $flags  = 0;\n-    my $name   = \"tmp$ix\";\n+    my $name   = \"tmp\";\n     my $class  = class($namesv);\n     if ( !defined($namesv) || $class eq \"SPECIAL\" ) {\n       # temporaries have \u0026PL_sv_undef instead of a PVNV for a name\n@@ -629,6 +629,7 @@\n         $flags |= REGISTER if $3;\n       }\n     }\n+    $name = \"$name$ix\";\n     $pad[$ix] =\n       B::Stackobj::Padsv-\u003enew( $type, $flags, $ix, \"i_$name\", \"d_$name\" );\n```","files":null},{"type":3,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200063,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc4NjY2NjUy","github-url":"https://github.com/rurban/perl-compiler/issues/37#issuecomment-78666652"},"message":"Comment [#3](https://code.google.com/p/perl-compiler/issues/detail?id=35#c3) originally posted by rurban on 2010-08-17T12:45:28.000Z:\n\n\u0026lt;empty\u0026gt;","files":null},{"type":3,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200067,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc4NjY2NzE0","github-url":"https://github.com/rurban/perl-compiler/issues/37#issuecomment-78666714"},"message":"Comment [#4](https://code.google.com/p/perl-compiler/issues/detail?id=35#c4) originally posted by rurban on 2010-08-17T12:46:37.000Z:\n\n\u0026lt;empty\u0026gt;","files":null},{"type":3,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200072,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc4NjY2Nzg1","github-url":"https://github.com/rurban/perl-compiler/issues/37#issuecomment-78666785"},"message":"Comment [#5](https://code.google.com/p/perl-compiler/issues/detail?id=35#c5) originally posted by rurban on 2010-08-17T14:32:19.000Z:\n\nfix applied with r527 (asis, not the revised version). my revised version could suffer from an nameclash by accident.\n\nimproved testcase t/issue35.t with r529. Both patches from Heinz Knutzen. Thanks!","files":null},{"type":4,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200074,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjUxMzc2MjE4"},"status":2}]}