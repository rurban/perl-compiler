{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426203071,"metadata":{"github-id":"MDU6SXNzdWU2MDkzNTQ1OQ==","github-url":"https://github.com/rurban/perl-compiler/issues/80","origin":"github"},"title":"5.15.2 hang at hfree_next_entry","message":"Original [issue 78](https://code.google.com/p/perl-compiler/issues/detail?id=78) created by rurban on 2011-10-19T13:48:39.000Z:\n\nRepro \n  t/testc.sh -O3 and -O4 29\n  ccode71i_3\n\nHangs at hv.c:1670\n\nOne first analysis and fix was r1133:\n  # test 36\n  $init-\u0026gt;add( \u0026quot;HvTOTALKEYS($sym) = 0;\u0026quot;);\n  # empty contents cleared in aassign (keys = 7, not 0)\n  # XXX should be fixed in CORE\n    if (0) {\n    $init-\u0026gt;add( \u0026quot;{\\tchar _array;\u0026quot;,\n        \u0026quot;\\tNewxz(array, sizeof(HE_) + sizeof(struct xpvhv_aux), char);\u0026quot;,\n        \u0026quot;\\tHvARRAY($sym) = (HE**)array;\u0026quot;,\n        \u0026quot;\\tHvTOTALKEYS($sym) = 0;\u0026quot;,\n        \u0026quot;}\u0026quot; );\n    }\n\nRelated changes to skip hanging tests: \n  r1183 skip 2 issue71.t tests on 5.15 because hangs at Perl_hfree_next_entry\n  r1138 skip B::C issue 24 dbm \u0026quot;hangs at Perl_hfree_next_entry \u0026gt;= 5.15\u0026quot;\n  r1132 skip some 5.15.2 hanging tests: while Perl_hfree_next_entry hv.c:1670","files":null}]}