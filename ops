{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426277873,"metadata":{"github-id":"MDU6SXNzdWU2MTIxODc2NQ==","github-url":"https://github.com/rurban/perl-compiler/issues/180","origin":"github"},"title":"problem with hash size initialized at compilation time","message":"Original [issue 178](https://code.google.com/p/perl-compiler/issues/detail?id=178) created by atoomic on 2013-11-08T19:38:30.000Z:\n\nwhen initializing a hash at compilation, the total number of keys is strangely wrong...\n\n\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. compile and run that script ( options used at compilation -MO=-qq,C,-O2,-fno-warnings,-fno-fold )\n\u0026gt; cat script.pl\nBEGIN {\n  $hash  = { pi =\u0026gt; 3.14, e =\u0026gt; 2.72, i =\u0026gt; -1 } ;\n}\n\nuse Data::Dumper;\nprint \u0026quot;hash: \u0026quot;.Dumper($hash);\nprint \u0026quot;keys: \u0026quot;.Dumper( [ keys %$hash ] ) ;\nprint \u0026quot;nb keys: \u0026quot;.scalar(keys %$hash).\u0026quot;\\n\u0026quot;;\n\nWhat is the expected output? \n\u0026gt; perl script.pl\nhash: $VAR1 = {\n          'e' =\u0026gt; '2.72',\n          'pi' =\u0026gt; '3.14',\n          'i' =\u0026gt; -1\n        };\nkeys: $VAR1 = [\n          'e',\n          'pi',\n          'i'\n        ];\nnb keys: 3\n\nWhat do you see instead?\n\u0026gt; ./script.bin\nhash: $VAR1 = {\n          'e' =\u0026gt; '2.72',\n          'pi' =\u0026gt; '3.14',\n          'i' =\u0026gt; -1\n        };\nkeys: $VAR1 = [\n          'e',\n          'pi',\n          'i'\n        ];\nnb keys: 10\n\n\u003cb\u003eWhat perl version are you using? Threaded? -DDEBUGGING? On what operating\u003c/b\u003e\n\u003cb\u003esystem?\u003c/b\u003e\n\nperl 5.14.3 unthreaded with centos 6.4 32 bits\n\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e","files":null}]}