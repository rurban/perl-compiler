{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426241640,"metadata":{"github-id":"MDU6SXNzdWU2MTAyOTA2NA==","github-url":"https://github.com/rurban/perl-compiler/issues/108","origin":"github"},"title":"perl-5.16.1 with ITHREADS: wrong CopSTASHPV_set","message":"Original [issue 106](https://code.google.com/p/perl-compiler/issues/detail?id=106) created by shlomif on 2012-08-26T09:54:22.000Z:\n\nHi,\n\nwhen I build B-C-1.42 on perl-5.16.0 with ITHREADS enabled, I am getting these compilation errors:\n\n```\nshlomif[rpms]:$mageia/perl-B-C/SOURCES/B-C-1.42$ perl Makefile.PL \nChecking if your kit is complete...\nLooks good\nWriting Makefile for ByteLoader\nWriting MYMETA.yml and MYMETA.json\nWriting Makefile for B::Stash\nWriting MYMETA.yml and MYMETA.json\nWriting Makefile for B::C\nWriting MYMETA.yml and MYMETA.json\nshlomif[rpms]:$mageia/perl-B-C/SOURCES/B-C-1.42$ make test\nmake[1]: Entering directory `/home/shlomif/Download/unpack/Mageia/perl-B-C/SOURCES/B-C-1.42/ByteLoader'\ncp BcVersions.pod ../blib/lib/BcVersions.pod\ncp ByteLoader.pm ../blib/lib/ByteLoader.pm\ncd .. \u0026amp;\u0026amp; /usr/bin/perl5.16.1 bytecode.pl \u0026amp;\u0026amp; cd ByteLoader\ngcc -c   -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -g -pipe -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector --param=ssp-buffer-size=4 -fPIC -Wl,--as-needed -Wl,-z,relro -Wl,-O1 -Wl,--build-id -Wl,--enable-new-dtags -pthread   -DVERSION=\\\u0026quot;0.09\\\u0026quot; -DXS_VERSION=\\\u0026quot;0.09\\\u0026quot; -fPIC \u0026quot;-I/usr/lib/perl5/5.16.1/x86_64-linux-thread-multi/CORE\u0026quot;   byterun.c\nbyterun.c: In function ‘byterun’:\nbyterun.c:1326:29: error: macro \u0026quot;CopSTASHPV_set\u0026quot; requires 3 arguments, but only 2 given\nbyterun.c:1326:3: error: ‘CopSTASHPV_set’ undeclared (first use in this function)\nbyterun.c:1326:3: note: each undeclared identifier is reported only once for each function it appears in\nmake[1]: *** [byterun.o] Error 1\nmake[1]: Leaving directory `/home/shlomif/Download/unpack/Mageia/perl-B-C/SOURCES/B-C-1.42/ByteLoader'\nmake: *** [subdirs-test] Error 2\nshlomif[rpms]:$mageia/perl-B-C/SOURCES/B-C-1.42$ \n```\n\nThis prevents me from updating it for Mageia 3/Cauldron. I'm on Mageia 3 on x86-64.\n\nRegards,\n\n-- Shlomi Fish","files":null}]}