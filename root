{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426277629,"metadata":{"github-id":"MDU6SXNzdWU2MTIxNjc3Mg==","github-url":"https://github.com/rurban/perl-compiler/issues/165","origin":"github"},"title":"DESTROY method not called when variable initialized in a BEGIN block","message":"Original [issue 163](https://code.google.com/p/perl-compiler/issues/detail?id=163) created by atoomic on 2013-11-06T22:15:28.000Z:\n\n\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. try to compile that script\n\u0026gt; cat test.pl\nmy $destroyed = 0;\nsub  X::DESTROY { $destroyed = 1 }\n{\n    my $x;\n    BEGIN {$x = sub { }  }\n    $x = bless {}, 'X';\n}\nprint qq{ok\\n} if $destroyed == 1;\n\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\nX::DESTROY method should be called when $x is destroyed\n\n\u003cb\u003eWhat perl version are you using? Threaded? -DDEBUGGING? On what operating\u003c/b\u003e\n\u003cb\u003esystem?\u003c/b\u003e\n\ncentos 6.4 32 bits with perl 5.14.3\n\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\nextracted from CORE test op/closure.t","files":null}]}