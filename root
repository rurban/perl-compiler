{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426203002,"metadata":{"github-id":"MDU6SXNzdWU2MDkzNTE0Mg==","github-url":"https://github.com/rurban/perl-compiler/issues/74","origin":"github"},"title":"CC: segfault / error message with sort if comparison function calls other function","message":"Original [issue 72](https://code.google.com/p/perl-compiler/issues/detail?id=72) created by rurban on 2011-06-26T19:22:57.000Z:\n\nThis test program aborts if compiled with B::CC.\n# test23.pl\n\nsub f { my ($arg) = @_; $arg }\nsub my_sort { f($a) cmp f($b) }\nmy @sorted = sort(my_sort @ARGV);\n# print \u0026quot;@sorted\\n\u0026quot;;\n\nExpected output:\n$ perl test23.pl b a\na b\n$ perl test23.pl c b a\na b c\n\nWith B:CC:\n./test23 b a\nSegmentation fault\n./test23 c b a\nSort subroutine didn't return single value at test23.c line 2.\n\nIf we add a return statement to sub f, the programs runs correctly both interpreted and compiled.\n# test23a.pl\n\nsub f { my ($arg) = @_; return $arg }\nsub my_sort { f($a) cmp f($b) }\nmy @sorted = sort(my_sort @ARGV);\n# print \u0026quot;@sorted\\n\u0026quot;;\n\nUsed versions:\n- perl v5.12.3\n- B::C r1111","files":null}]}