{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426241762,"metadata":{"github-id":"MDU6SXNzdWU2MTAyOTQ1NQ==","github-url":"https://github.com/rurban/perl-compiler/issues/117","origin":"github"},"title":"CopSTASHPV crash on 5.17","message":"Original [issue 115](https://code.google.com/p/perl-compiler/issues/detail?id=115) created by bulk88 on 2012-12-13T17:00:33.000Z:\n\n\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. use a perl 5.17 probably after d4d03940c58a0177edb93c8854929856e9975bf9\n2. compiling attached file generated by git master B::CC\n3. run the exe\n\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\n\n---\n\nUnhandled exception at 0x7c362863 (msvcr71.dll) in pccRSO5z.exe: 0xC0000005: Access violation reading location 0x00000000.\n\n---\n\nSimple null deref.\n\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\n\ngit master B::CC and perl 5.17 93a641ae382638ffd1980378be4810244d04f4b0 on Win32 32 bit with VC 2003\n\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\n\nhttp://perl5.git.perl.org/perl.git/commitdiff/d4d03940c58a0177edb93c8854929856e9975bf9 is probably responsible.\n\n---\n\n```\nmsvcr71.dll!strlen()  Line 78   Asm\nperl517.dll!Perl_gv_stashpv(interpreter * my_perl=0x00865d04, const char * name=0x00000000, long create=1)  Line 1284 + 0xd C\n```\n\n\u0026gt;    pccRSO5z.exe!my_perl_destruct(interpreter \\* my_perl=0x00865d04)  Line 2131 + 0xe    C\n    pccRSO5z.exe!main(int argc=2, char \\* \\* argv=0x00862478, char \\* \\* env=0x00862d78)  Line 2291 + 0x9   C\n    pccRSO5z.exe!mainCRTStartup()  Line 398 + 0xe   C\n    kernel32.dll!_BaseProcessStart@4()  + 0x23  \n\n---\n\nPerl_gv_stashpv was passed\n\n---\n\n```\ncreate  1   long\n```\n-   name    0x00000000 \u0026lt;Bad Ptr\u0026gt;  const char *\n  ________________________________________________________________\n  int my_perl_destruct( PerlInterpreter _my_perl );\n  int my_perl_destruct( PerlInterpreter *my_perl ) {\n  /_ set all our static pv and hek to \u0026amp;PL_sv_undef so perl_destruct() will not cry */\n  CopFILE_set(\u0026amp;cop_list[0], NULL);\n  \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;    CopSTASHPV_set(\u0026amp;cop_list[0], NULL);\n  ________________________________________________________________\n  crash point","files":null}]}