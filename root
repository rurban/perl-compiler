{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426200258,"metadata":{"github-id":"MDU6SXNzdWU2MDkyNTM4Nw==","github-url":"https://github.com/rurban/perl-compiler/issues/52","origin":"github"},"title":"Unsigned integer property gets lost with B::CC","message":"Original [issue 50](https://code.google.com/p/perl-compiler/issues/detail?id=50) created by rurban on 2010-09-24T22:24:38.000Z:\n\nThis test program gives different results when compiled with B::CC than when run with perl.\n# test17.pl\n\nsub check {\n    my ($m) = @_;\n    print(sprintf(\u0026quot;%lx \u0026quot;, $m), $m, \u0026quot;\\n\u0026quot;);\n}\n\ncheck(0xffffffff);\ncheck((0xffffffff \u0026amp; 0x7fffffff) \u0026lt;\u0026lt; 1);\n\nmy $mask =  0xffffffff;\ncheck($mask);\nmy $mask1 = ($mask \u0026amp; 0x7fffffff) \u0026lt;\u0026lt; 1;\ncheck($mask1);\n$mask1 \u0026amp;= 0xffffffff;\n# check($mask1);\n\n$ perl test17.pl\nffffffff 4294967295\nfffffffe 4294967294\nffffffff 4294967295\nfffffffe 4294967294\nfffffffe 4294967294\n\n$perlcc -O -o test17 test17.pl \u0026amp;\u0026amp; ./test17\n... warnings ...\nffffffff 4294967295\nfffffffe 4294967294\nffffffff 4294967295\nfffffffe -2\nfffffffe 4294967294\n\nIn principle, the code from B:CC seems to be able to handle unsigned integers correctly. But in \u0026quot;($mask \u0026amp; 0x7fffffff) \u0026lt;\u0026lt; 1\u0026quot; the unsigned property gets lost.\n\nI need this to be correct for operations with IPv4 addresses coded as unsigned integers.\n\nUsed versions:\n- perl v5.12.1 built for i686-linux\n- B::C r632\n- running on a 32-bit Linux installation","files":null}]}