{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426277813,"metadata":{"github-id":"MDU6SXNzdWU2MTIxODI4Nw==","github-url":"https://github.com/rurban/perl-compiler/issues/176","origin":"github"},"title":"binary operator with utf8 string","message":"Original [issue 174](https://code.google.com/p/perl-compiler/issues/detail?id=174) created by atoomic on 2013-11-07T21:58:19.000Z:\n\n\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. compiling that script fails ( even after merging the unicode patch, commit 8c8add3 issue 142 and issue 166 )\n\u0026gt; cat script.pl\n\nmy $str = \u0026quot;\\x{10000}\\x{800}\u0026quot;;\nno warnings \u0026quot;utf8\u0026quot;;\n{ use bytes; $str =~ s/\\C\\C\\z//; }\n\n  # it's really bogus that (~~malformed) is \\0.\nmy $ref = \u0026quot;\\x{10000}\\0\u0026quot;;\nprint \u0026quot;ok\\n\u0026quot; if ~~$str eq $ref;\n\n  # same test, but this time with a longer replacement string that\n  # exercises a different branch in pp_subsr()\n\n$str = \u0026quot;\\x{10000}\\x{800}\u0026quot;;\n{ use bytes; $str =~ s/\\C\\C\\z/\\0\\0\\0/; }\n\n```\n# it's also bogus that (~~malformed) is \\0\\0\\0\\0.\nmy $ref = \u0026quot;\\x{10000}\\0\\0\\0\\0\u0026quot;;\nprint \u0026quot;ok\\n\u0026quot; if ~~$str eq $ref;\n\n\nWhat is the expected output? \n\u0026gt; perl op/bop.t\nok\nok\n\nWhat do you see instead?\n# nothing displayed\n\u0026gt; make op/bop.bin; ./op/bop.bin\n/usr/local/cpanel/3rdparty/perl/514/bin/perl -MO=-qq,C,-O2,-fno-warnings,-fno-fold,-oop/bop.c op/bop.t\n/usr/local/cpanel/3rdparty/perl/514/bin/perl ../../script/cc_harness -q  op/bop.c -o op/bop.bin\n/bin/rm op/bop.c\n\n\u003cb\u003eWhat perl version are you using? Threaded? -DDEBUGGING? On what operating\u003c/b\u003e\n\u003cb\u003esystem?\u003c/b\u003e\n\nperl 5.14.3 with centos 6.4 32 bits\n\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\n```","files":null}]}