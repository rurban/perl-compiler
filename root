{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426203423,"metadata":{"github-id":"MDU6SXNzdWU2MDkzNzAzNQ==","github-url":"https://github.com/rurban/perl-compiler/issues/103","origin":"github"},"title":"heap-use-after-free in caller() in unshare_hek_or_pvn","message":"Original [issue 101](https://code.google.com/p/perl-compiler/issues/detail?id=101) created by rurban on 2012-05-07T13:52:26.000Z:\n\npb blib/script/perlcc -v4 -O3 -UB -uPod::Perldoc::BaseTo -Wc=-DALLOW_PERL_OPTIONS -o ./perldoc /usr/local/bin/perldoc -S\n./perldoc -T -f wait\n\n...\n(/usr/local/lib/perl5/5.15.9/Pod/Perldoc.pm:1649)   const(PV(\u0026quot; use lib qw(. lib); 1; \u0026quot;))\n...\n(/usr/local/lib/perl5/5.15.9/x86_64-linux-debug-asan/Config.pm:43)  padsv($export_Config)\n(/usr/local/lib/perl5/5.15.9/x86_64-linux-debug-asan/Config.pm:43)  sassign\n(/usr/local/lib/perl5/5.15.9/x86_64-linux-debug-asan/Config.pm:43)  nextstate\n(/usr/local/lib/perl5/5.15.9/x86_64-linux-debug-asan/Config.pm:46)  const(IV(0))\n(/usr/local/lib/perl5/5.15.9/x86_64-linux-debug-asan/Config.pm:46)  caller\n# \n\n==21703== ERROR: AddressSanitizer heap-use-after-free on address 0x7fe7033bf988 at pc 0x7fe7053bdf6a bp 0x7fffc12617d0 sp 0x7fffc12617c8\nREAD of size 8 at 0x7fe7033bf988 thread T0\n    #\u0026nbsp;0 0x7fe7053bdf6a in S_unshare_hek_or_pvn /usr/src/perl/build-5.15.9d-nt-asan/hv.c:2612\n    #\u0026nbsp;1 0x7fe70537edb4 in Perl_unshare_hek /usr/src/perl/build-5.15.9d-nt-asan/hv.c:2586\n    #\u0026nbsp;2 0x7fe7054efcb6 in Perl_sv_force_normal_flags /usr/src/perl/build-5.15.9d-nt-asan/sv.c:4828\n    #\u0026nbsp;3 0x7fe705608bda in Perl_sv_sethek /usr/src/perl/build-5.15.9d-nt-asan/sv.c:4605\n    #\u0026nbsp;4 0x7fe70598a656 in Perl_pp_caller /usr/src/perl/build-5.15.9d-nt-asan/pp_ctl.c:1908\n    #\u0026nbsp;5 0x7fe705179cae in Perl_runops_debug /usr/src/perl/build-5.15.9d-nt-asan/dump.c:2119\n    #\u0026nbsp;6 0x7fe704b9f0fd in Perl_call_sv /usr/src/perl/build-5.15.9d-nt-asan/perl.c:2703\n    #\u0026nbsp;7 0x7fe704b7a27b in Perl_call_list /usr/src/perl/build-5.15.9d-nt-asan/perl.c:4780\n    #\u0026nbsp;8 0x7fe704ad6572 in S_process_special_blocks /usr/src/perl/build-5.15.9d-nt-asan/op.c:6879\n    #\u0026nbsp;9 0x7fe704ab8cd6 in Perl_newATTRSUB_flags /usr/src/perl/build-5.15.9d-nt-asan/op.c:6849\n    #\u0026nbsp;10 0x7fe704a6a979 in Perl_newATTRSUB /usr/src/perl/build-5.15.9d-nt-asan/op.c:6496\n    #\u0026nbsp;11 0x7fe704a691ad in Perl_utilize /usr/src/perl/build-5.15.9d-nt-asan/op.c:4685\n    #\u0026nbsp;12 0x7fe704ec67cb in Perl_yyparse /usr/src/perl/build-5.15.9d-nt-asan/perly.y:364\n    #\u0026nbsp;13 0x7fe7059fb13d in S_doeval /usr/src/perl/build-5.15.9d-nt-asan/pp_ctl.c:3655\n    #\u0026nbsp;14 0x7fe705a1e396 in Perl_pp_require /usr/src/perl/build-5.15.9d-nt-asan/pp_ctl.c:4212\n    #\u0026nbsp;15 0x7fe705179cae in Perl_runops_debug /usr/src/perl/build-5.15.9d-nt-asan/dump.c:2119\n    #\u0026nbsp;16 0x7fe704b9f0fd in Perl_call_sv /usr/src/perl/build-5.15.9d-nt-asan/perl.c:2703\n    #\u0026nbsp;17 0x7fe704b7a27b in Perl_call_list /usr/src/perl/build-5.15.9d-nt-asan/perl.c:4780\n    #\u0026nbsp;18 0x7fe704ad6572 in S_process_special_blocks /usr/src/perl/build-5.15.9d-nt-asan/op.c:6879\n    #\u0026nbsp;19 0x7fe704ab8cd6 in Perl_newATTRSUB_flags /usr/src/perl/build-5.15.9d-nt-asan/op.c:6849\n    #\u0026nbsp;20 0x7fe704a6a979 in Perl_newATTRSUB /usr/src/perl/build-5.15.9d-nt-asan/op.c:6496\n    #\u0026nbsp;21 0x7fe704a691ad in Perl_utilize /usr/src/perl/build-5.15.9d-nt-asan/op.c:4685\n    #\u0026nbsp;22 0x7fe704ec67cb in Perl_yyparse /usr/src/perl/build-5.15.9d-nt-asan/perly.y:364\n    #\u0026nbsp;23 0x7fe7059fb13d in S_doeval /usr/src/perl/build-5.15.9d-nt-asan/pp_ctl.c:3655\n    #\u0026nbsp;24 0x7fe705a3e7b0 in Perl_pp_entereval /usr/src/perl/build-5.15.9d-nt-asan/pp_ctl.c:4340\n    #\u0026nbsp;25 0x7fe705179cae in Perl_runops_debug /usr/src/perl/build-5.15.9d-nt-asan/dump.c:2119\n    #\u0026nbsp;26 0x7fe704b95c0c in S_run_body /usr/src/perl/build-5.15.9d-nt-asan/perl.c:2396\n    #\u0026nbsp;27 0x7fe704b9130b in perl_run /usr/src/perl/build-5.15.9d-nt-asan/perl.c:2318\n    #\u0026nbsp;28 0x40caae in main ??:0\n    #\u0026nbsp;29 0x7fe703b10ead in __libc_start_main /home/aurel32/eglibc/eglibc-2.13/csu/libc-start.c:260\n0x7fe7033bf988 is located 8 bytes inside of 45-byte region [0x7fe7033bf980,0x7fe7033bf9ad)\nfreed by thread T0 here:\npreviously allocated by thread T0 here:\n==21703== ABORTING\nStats: 7M malloced (24M for red zones) by 105050 calls\nStats: 0M realloced by 3531 calls\nStats: 2M freed by 40165 calls\nStats: 0M really freed by 0 calls\nStats: 60M (15365 full pages) mmaped in 15 calls\n  mmaps   by size class: 8:114681; 9:8191; 10:4095; 11:2047; 12:1024; 13:512; 14:256; 15:128; 16:64;\n  mallocs by size class: 8:102949; 9:979; 10:348; 11:125; 12:94; 13:510; 14:42; 15:1; 16:2;\n  frees   by size class: 8:39472; 9:307; 10:183; 11:71; 12:40; 13:56; 14:35; 15:1;\n  rfrees  by size class:\nStats: malloc large: 0 small slow: 254\nShadow byte and word:\n  0x1ffce0677f31: fd\n  0x1ffce0677f30: fd fd fd fd fd fd fd fd\nMore shadow bytes:\n  0x1ffce0677f10: fd fd fd fd fd fd fd fd\n  0x1ffce0677f18: fd fd fd fd fd fd fd fd\n  0x1ffce0677f20: fa fa fa fa fa fa fa fa\n  0x1ffce0677f28: fa fa fa fa fa fa fa fa\n=\u0026gt;0x1ffce0677f30: fd fd fd fd fd fd fd fd\n  0x1ffce0677f38: fd fd fd fd fd fd fd fd\n  0x1ffce0677f40: fa fa fa fa fa fa fa fa\n  0x1ffce0677f48: fa fa fa fa fa fa fa fa\n  0x1ffce0677f50: 00 02 fb fb fb fb fb fb","files":null}]}