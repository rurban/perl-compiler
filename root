{"version":1,"ops":[{"type":1,"author":{"id":"dc64d6d260e2683565fe6e13d60cfbe9fec0fa09"},"timestamp":1426202700,"metadata":{"github-id":"MDU6SXNzdWU2MDkzNDIzMw==","github-url":"https://github.com/rurban/perl-compiler/issues/56","origin":"github"},"title":"pad_swipe segv when loading pmc","message":"Original [issue 54](https://code.google.com/p/perl-compiler/issues/detail?id=54) created by rurban on 2010-11-04T09:58:21.000Z:\n\n\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. compile a module with -H\n2. use this module\n\nt1a.pl:\n$sss='tes';\nuse t1b;\nprint \u0026quot;hello world!\\n\u0026quot;;\n\u0026amp;t1b::test();\n\nt1b.pl:\npackage t1b;\nsub test {\n  $abc='111'; print \u0026quot;--$abc--\\n\u0026quot;; }\n1;\n\n$ perl -Mblib -MO=Bytecode,-H,-ot1b.pmc t1b.pl\n$ perl -I. t1a.pl\n\n$ gdb perl5.10.1d\n(gdb) run -I. t1a.pl\n(gdb) bt\n# \u0026nbsp;0  0x520a9435 in Perl_pad_swipe (my_perl=0x121a190, po=5, refadjust=1 '\\001') at pad.c:1121\n# \u0026nbsp;1  0x52001d59 in Perl_op_clear (my_perl=0x121a190, o=0x122aaa0) at op.c:600\n# \u0026nbsp;2  0x52001ad4 in Perl_op_free (my_perl=0x121a190, o=0x122aaa0) at op.c:518\n# \u0026nbsp;3  0x52001a50 in Perl_op_free (my_perl=0x121a190, o=0x122aac0) at op.c:497\n# \u0026nbsp;4  0x52001a50 in Perl_op_free (my_perl=0x121a190, o=0x122ab48) at op.c:497\n# \u0026nbsp;5  0x52026a9b in perl_destruct (my_perl=0x121a190) at perl.c:812\n# \u0026nbsp;6  0x00401236 in _fu0__PL_do_undump () at perlmain.c:119\n# \u0026nbsp;1  0x52001d59 in Perl_op_clear (my_perl=0x121a190, o=0x122aaa0) at op.c:600\n\n600               pad_swipe(o-\u0026gt;op_targ,1);\n(gdb) p *o\n$1 = {op_next = 0x122aa60, op_sibling = 0x122aa80, op_ppaddr = 0x52130c88 \u0026lt;Perl_pp_const\u0026gt;,\n  op_madprop = 0x0, op_targ = 5, op_type = 5, op_opt = 1, op_latefree = 0, op_latefreed = 0,\n  op_attached = 0, op_spare = 0, op_flags = 2 '\\002', op_private = 0 '\\0'}\n\n$ pb -MO=Concise t1a.pl\ne  \u0026lt;@\u0026gt; leave[1 ref] vKP/REFC -\u0026gt;(end)\n1     \u0026lt;0\u0026gt; enter -\u0026gt;2\n2     \u0026lt;;\u0026gt; nextstate(main 1 t1a.pl:3) v:{ -\u0026gt;3\n5     \u0026lt;2\u0026gt; sassign vKS/2 -\u0026gt;6\nUse of uninitialized value $sv in concatenation (.) or string at /usr/lib/perl5/5.10/i686-debug-cygwin/B/Conc  ise.pm line 700.\nbad concise_sv:  at /usr/lib/perl5/5.10/i686-debug-cygwin/B/Concise.pm line 700\n        B::Concise::concise_sv(undef, 'HASH(0x10da2a0)', '') called at /usr/lib/perl5/5.10/i686-debug-cygwin/  B/Concise.pm line 874\n        B::Concise::concise_op('B::SVOP=SCALAR(0x10da198)', 2, '#hyphseq2 (_(   (x( ;)x))_)\u0026lt;#classsym\u0026gt; #exnam  e#arg(?([#targar...') called at /usr/lib/perl5/5.10/i686-debug-cygwin/B/Concise.pm line 926\n        B::OP::concise('B::SVOP=SCALAR(0x10da198)', 2) called at /usr/lib/perl5/5.10/i686-debug-cygwin/B/Conc  ise.pm line 221\n        B::Concise::**ANON**('B::SVOP=SCALAR(0x10da198)', 2) called at /usr/lib/perl5/5.10/i686-debug-cygwin/  B/Concise.pm line 459","files":null}]}